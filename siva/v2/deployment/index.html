<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="no-js ie6"><![endif]-->
<!--[if IE 7 ]><html class="no-js ie7"><![endif]-->
<!--[if IE 8 ]><html class="no-js ie8"><![endif]-->
<!--[if IE 9 ]><html class="no-js ie9"><![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    
      
        <title>5.1 Deployment model - SiVa - Validation Service Documentation</title>
      
      
      
      
    
    <meta property="og:url" content="None">
    <meta property="og:title" content="SiVa - Validation Service Documentation">
    <meta property="og:image" content="None/../../../">
    <meta name="apple-mobile-web-app-title" content="SiVa - Validation Service Documentation">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    
    <link rel="shortcut icon" type="image/x-icon" href="../../../assets/images/favicon-e565ddfa3b.ico">
    <link rel="icon" type="image/x-icon" href="../../../assets/images/favicon-e565ddfa3b.ico">
    <style>
      @font-face {
      	font-family: 'Icon';
      	src: url('../../../assets/fonts/icon.eot?52m981');
      	src: url('../../../assets/fonts/icon.eot?#iefix52m981')
               format('embedded-opentype'),
      		   url('../../../assets/fonts/icon.woff?52m981')
               format('woff'),
      		   url('../../../assets/fonts/icon.ttf?52m981')
               format('truetype'),
      		   url('../../../assets/fonts/icon.svg?52m981#icon')
               format('svg');
      	font-weight: normal;
      	font-style: normal;
      }
    </style>
    <link rel="stylesheet" href="../../../assets/stylesheets/application-a422ff04cc.css">
    
      <link rel="stylesheet" href="../../../assets/stylesheets/palettes-05ab2406df.css">
    
    
      
      
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,700|Roboto+Mono">
      <style>
        body, input {
          font-family: 'Ubuntu', Helvetica, Arial, sans-serif;
        }
        pre, code {
          font-family: 'Roboto Mono', 'Courier New', 'Courier', monospace;
        }
      </style>
    
    
      <link rel="stylesheet" href="../../../override.css">
    
    <script src="../../../assets/javascripts/modernizr-4ab42b99fd.js"></script>
    
  </head>
  
  
  
  <body class="palette-primary-cyan palette-accent-light-blue">
    
      
      
    
    <div class="backdrop">
      <div class="backdrop-paper"></div>
    </div>
    <input class="toggle" type="checkbox" id="toggle-drawer">
    <input class="toggle" type="checkbox" id="toggle-search">
    <label class="toggle-button overlay" for="toggle-drawer"></label>
    <header class="header">
      <nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        
          <span class="path">
            
              
                5. DEPLOYMENT <i class="icon icon-link"></i>
              
            
          </span>
        
        5.1 Deployment model
      </div>
    </div>
    
    
    <div class="button button-search" role="button" aria-label="Search">
      <label class="toggle-button icon icon-search" title="Search" for="toggle-search"></label>
    </div>
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
    </header>
    <main class="main">
      
      <div class="drawer">
        <nav aria-label="Navigation">
  
  <a href="https://github.com/open-eid/SiVa" class="project">
    <div class="banner">
      
      <div class="name">
        <strong>
          SiVa - Validation Service Documentation
          <span class="version">
            
          </span>
        </strong>
        
          <br>
          open-eid/SiVa
        
      </div>
    </div>
  </a>
  <div class="scrollable">
    <div class="wrapper">
      
        <ul class="repo">
          <li class="repo-download">
            
            <a href="https://github.com/open-eid/SiVa/archive/master.zip" target="_blank" title="Download" data-action="download">
              <i class="icon icon-download"></i> Download
            </a>
          </li>
          <li class="repo-stars">
            <a href="https://github.com/open-eid/SiVa/stargazers" target="_blank" title="Stargazers" data-action="star">
              <i class="icon icon-star"></i> Stars
              <span class="count">&ndash;</span>
            </a>
          </li>
        </ul>
        <hr>
      
      <div class="toc">
        <ul>
          
            
  <li>
    <a class="" title="VERSION HISTORY" href="../../version_info/">
      VERSION HISTORY
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="INTRODUCTION" href="../../..">
      INTRODUCTION
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="1. DEFINITIONS" href="../../definitions/">
      1. DEFINITIONS
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="2. BACKGROUND" href="../../overview/">
      2. BACKGROUND
    </a>
    
  </li>

          
            
  <li>
    <span class="section">3. STRUCTURE & ACTIVITIES</span>
    <ul>
      
        
  <li>
    <a class="" title="3.1 Component model" href="../structure_and_activities/">
      3.1 Component model
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="3.2 Use cases" href="../use_cases/">
      3.2 Use cases
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <a class="" title="4. INTERFACES" href="../interfaces/">
      4. INTERFACES
    </a>
    
  </li>

          
            
  <li>
    <span class="section">5. DEPLOYMENT</span>
    <ul>
      
        
  <li>
    <a class="current" title="5.1 Deployment model" href="./">
      5.1 Deployment model
    </a>
    
      
      
        <ul>
          
            <li class="anchor">
              <a title="Nodes" href="#nodes">
                Nodes
              </a>
            </li>
          
            <li class="anchor">
              <a title="Horizontal scaling" href="#horizontal-scaling">
                Horizontal scaling
              </a>
            </li>
          
        </ul>
      
    
  </li>

      
        
  <li>
    <a class="" title="5.2 System integrator's guide" href="../systemintegrators_guide/">
      5.2 System integrator's guide
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <a class="" title="6. QUALITY ASSURANCE" href="../../qa_strategy/">
      6. QUALITY ASSURANCE
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="7. REFERENCES" href="../../references/">
      7. REFERENCES
    </a>
    
  </li>

          
            
  <li>
    <span class="section">APPENDICES</span>
    <ul>
      
        
  <li>
    <a class="" title="Appendix 1 - Validation Policy" href="../../appendix/validation_policy/">
      Appendix 1 - Validation Policy
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Appendix 2 - Test Case Descriptions" href="../../appendix/test_cases/">
      Appendix 2 - Test Case Descriptions
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Appendix 3 - WSDL of SOAP Interface" href="../../appendix/wsdl/">
      Appendix 3 - WSDL of SOAP Interface
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Appendix 4 - Known Issues" href="../../appendix/known_issues/">
      Appendix 4 - Known Issues
    </a>
    
  </li>

      
    </ul>
  </li>

          
        </ul>
        
      </div>
    </div>
  </div>
</nav>
      </div>
      <article class="article">
        <div class="wrapper">
          
            <h1>5.1 Deployment model</h1>
          
          <p>The deployment view of the architecture describes the various physical nodes in the most typical configuration for SiVa service provider.</p>
<p><img alt="SiVa Deployment view" src="../../../img/siva/uml_siva_deployment_diagram.png" /></p>
<h3 id="nodes">Nodes</h3>
<p>In the following section, a description of each network node element is described in detail.</p>
<table>
<thead>
<tr>
<th>Node</th>
<th>Setup description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Load balancer server</strong></td>
<td>Load balancer distributes traffic between SiVa server nodes when there is more than one Siva server instance running. SiVa does not set any specific requirements for load balancer. As an example, the nginx reverse proxy is used.</td>
</tr>
<tr>
<td><strong>Siva server</strong></td>
<td>Two separate services are set up to run on SiVa server: the <strong>SiVa webapp</strong> itself and the <strong>X-road validation webapp</strong>, to provide X-road support<ul><li>SiVa webapp</li></ul><br/>SiVa web appliction is executable Spring Boot JAR file. This means all the dependencies and servlet containers are packaged inside single JAR file. The JAR file can be placed anywhere in server and the JAR must be marked executable if its not already.<br/><br/>There also should be separate user created to run executalbe JAR as Linux service.<br/><br/>Read more about running <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/deployment-install.html#deployment-service">Spring Boot applications as Linux system service</a><br/><ul><li>X-road validation webapp</li></ul><br/>SiVa X-Road validation service is also Spring Boot executable JAR application and also should be installed as Linux service. X-Road validation service communicates with SiVa web application over HTTP and default port is 8081<br/><br/>Note that X-Road separate installation is required to avoid BouncyCastle library version conflicts and class loader issues.</td>
</tr>
<tr>
<td><strong>X-road security server</strong></td>
<td>A standard X-road security server setup. The SiVa validation service wsdl has to be registered to provide service to other organisations using XRoad infrastructure. Setting up XRoad Security server is out of scope for SiVa documentaton (see the <a href="https://www.ria.ee/en/x-road-instructions.html#v6">official installation instructions</a>).</td>
</tr>
<tr>
<td><strong>Demo server</strong></td>
<td>Demo server hosts the <strong>Demo webapp</strong> provided within SiVa project as a reference client implementation. <ul><li>Demo webapp - single Java web application that provides a simple form to upload and validate a signed file in Siva webapp. Demo webapp serves as a tool for evaluating and testing the validation service. </li></ul></td>
</tr>
</tbody>
</table>
<h3 id="horizontal-scaling">Horizontal scaling</h3>
<p>Neither the <strong>Siva webapp</strong>, <strong>X-road validation webapp</strong>, nor <strong>Demo wbapp</strong> persist their state in sessions between requests. Therefore it is possible to install multiple instances of these services behind respective load balancers.</p>
          <aside class="copyright" role="note">
            
            Documentation built with
            <a href="http://www.mkdocs.org" target="_blank">MkDocs</a>
            using the
            <a href="http://squidfunk.github.io/mkdocs-material/" target="_blank">
              Material
            </a>
            theme.
          </aside>
          
            <footer class="footer">
              
  <nav class="pagination" aria-label="Footer">
    <div class="previous">
      
        <a href="../interfaces/" title="4. INTERFACES">
          <span class="direction">
            Previous
          </span>
          <div class="page">
            <div class="button button-previous" role="button" aria-label="Previous">
              <i class="icon icon-back"></i>
            </div>
            <div class="stretch">
              <div class="title">
                4. INTERFACES
              </div>
            </div>
          </div>
        </a>
      
    </div>
    <div class="next">
      
        <a href="../systemintegrators_guide/" title="5.2 System integrator's guide">
          <span class="direction">
            Next
          </span>
          <div class="page">
            <div class="stretch">
              <div class="title">
                5.2 System integrator's guide
              </div>
            </div>
            <div class="button button-next" role="button" aria-label="Next">
              <i class="icon icon-forward"></i>
            </div>
          </div>
        </a>
      
    </div>
  </nav>

            </footer>
          
        </div>
      </article>
      <div class="results" role="status" aria-live="polite">
        <div class="scrollable">
          <div class="wrapper">
            <div class="meta"></div>
            <div class="list"></div>
          </div>
        </div>
      </div>
    </main>
    <script>
      var base_url = '../../..';
      var repo_id  = 'open-eid/SiVa';
    </script>
    <script src="../../../assets/javascripts/application-997097ee0c.js"></script>
    
    
  </body>
</html>